# 亲子活动实验室微信小程序产品需求文档（MVP版本）

## 产品概述
亲子活动实验室是一款结合 AI 能力与亲子陪伴理念的互动工具，面向有3–10岁孩子的家庭，通过生成高质量、低门槛、有互动感的任务卡片，提升家庭在日常生活中的创意陪伴质量。

### 主要使用场景
- 放学后的亲子时间
- 周末室内创作/共创活动
- 家庭聚会中的互动小游戏
- 临时需要"高质量亲子内容"的应急时刻

## 功能需求
### 1. 用户需求与功能分析
1. **活动卡片生成与浏览**
   - AI 生成个性化活动推荐
   - 按年龄段/场景/时长筛选活动
   - 收藏喜欢的活动
2. **活动执行与互动**
   - 活动步骤引导
   - 计时
   - 亲子互动记录（照片/视频）
3. **成长记录**
   - 活动完成记录
   - 亲子时光相册
   - 孩子成长数据
4. **分享功能**
   - 分享活动成果到微信等平台（不含社区）
5. **个性化设置**
   - 孩子信息管理
   - 兴趣偏好设置
   - 活动提醒
6. **合集浏览功能**
   - 浏览系统预设合集
   - 收藏喜欢的合集
   - 按标签/主题筛选合集
   - ~~创建自定义合集~~ (功能推迟到后期版本)

### 2. 页面设计与用户流程
- 首页/发现页、活动详情页、活动执行页、成果分享页、我的页面、成长记录页、合集详情页
- 删除打卡页、社区页及相关流程
- 删除创建合集页，保留合集浏览功能

### 3. 数据结构与云函数
- 删除打卡、社区相关集合与云函数，仅保留活动、合集、用户、收藏、记录等
- 合集数据统一由系统管理，不支持用户创建
- 分享仅支持分享到微信等外部平台

### 4. 主要用户流程
- 随机游戏流程、合集浏览流程、活动执行与记录流程、成果分享流程（分享到微信等平台）
- 删除打卡流程、社区统一展示流程、创建合集流程

## 设计规范

### 1. 合集头图标题系统设计

#### 1.1 主题分类与视觉标识
根据合集主题类型，使用不同的图标和颜色进行区分：

| 合集类型 | 标识图标 | 主题色 | 标题前缀 | 样例 |
|---------|--------|--------|---------|------|
| 雨天特辑 | fa-cloud-rain | #78e8ff (蓝色) | 雨天特辑 | 趣玩·宅家游戏宝箱 |
| 亲情特辑 | fa-hand-holding-heart | #FF6B8B (粉红) | 亲情特辑 | 趣玩·父子情感宝盒 |
| 科学探索 | fa-flask | #A3E635 (绿色) | 科学特辑 | 趣玩·科学探索实验室 |
| 专注力培养 | fa-brain | #B388FF (紫色) | 专注特辑 | 趣玩·专注力训练营 |
| 艺术创作 | fa-palette | #FFB039 (橙黄) | 艺术特辑 | 趣玩·艺术创想空间 |

#### 1.2 标题结构设计
- **前缀/主题指示器**：使用主题图标+颜色相应的文本指示合集类型
- **主标题结构**：「趣玩·」+「主题相关名称」
- **活动数量标签**：使用突出的色块标签标示活动数量

#### 1.3 视觉呈现规则
- 主题图标与文本颜色保持一致，与主题相符
- 主标题使用白色，保持清晰可读
- 活动数量使用橙色背景标签，形成视觉重点
- 头图使用渐变覆盖层，确保文字清晰可见

### 2. 标签展示逻辑

#### 2.1 标签分类与优先级
- **基础属性标签**：年龄段、适用场景、难度/人群  
  示例：3-8岁、雨天宅家、亲子同乐
- **统计类标签**：活动数量、平均时长、类型分布  
  示例：平均20分钟、动手类5个
- **特殊标签**：官方推荐、精选、限时、热门等  
  示例：官方精选、本周热门

#### 2.2 标签展示优先级
1. 特殊标签（如有）
2. 年龄段标签（必选）
3. 时长标签（必选）
4. 类型统计标签（至少1个）
5. 其他补充标签（可选）

#### 2.3 标签视觉规则
- 半透明白色背景
- 圆角设计
- 配合相关图标增加识别度
- 标签文字简洁明了，控制在2-4个字

### 3. 教育理念描述结构

#### 3.1 板块设计
- 使用浅色背景、轻微阴影
- 设置合理内边距（16px）
- 添加"教育理念"标题和图标

#### 3.2 内容结构（三段式）
1. **价值导向**：开门见山说明活动设计目标及价值
2. **方法论**：阐述教育方法论（如PBL、STEAM等）
3. **期望收获**：描述预期的亲子互动效果和成长方向

#### 3.3 写作指南
- 控制总字数在80-100字之间
- 使用专业但不晦涩的教育术语
- 突出差异化和专业性
- 注意避免与合集标题和标签信息重复
- 使用专业教育术语提升可信度（如PBL、STEAM、设计思维等）

### 4. 合集内活动项展示

#### 4.1 活动卡片结构
- 左侧图片（100x100px）
- 右侧内容区：标题、描述、标签
- 标题突出、描述简洁（2行限制）
- 底部标签区最多展示3个标签

#### 4.2 标签类型与展示优先级
1. 年龄段标签（必选）
2. 能力类型标签（必选，如创意、探索、科学等）
3. 时长标签（必选）

## 合集管理说明（MVP版本）

### 1. 系统预设合集
- MVP版本中所有合集均由系统预设和管理
- 初始提供8-10个精选合集，覆盖不同主题和年龄段
- 运营团队定期更新合集内容，保持新鲜度

### 2. 合集展示方式
- 首页展示推荐合集（3个）
- 合集页面展示全部系统合集，支持筛选和搜索
- 用户可收藏但不可创建或编辑合集

### 3. 后期规划
- 用户自定义合集功能将在后期版本中开放
- 支持用户根据个人需求创建专属合集
- 提供多种合集模板，简化用户创建流程

## 其他设计要点
- 视觉设计主题色为 #4ECDC4（清新绿色）
- 辅助色：#FF9F1C（橙色）、#FFE66D（黄色）
- 设计风格简洁明快，符合微信小程序视觉规范
- 图标统一使用 Font Awesome 系列，确保一致性
- 响应式设计，适应不同尺寸的手机屏幕 

## 微信小程序云开发计划

### 1. 项目初始化与配置

#### 1.1 基础环境配置
- 创建微信小程序项目，选择云开发模板
- 配置云开发环境（开发环境、测试环境、生产环境）
- 设置项目基础结构（目录规范、组件库、工具类）
- 配置TypeScript支持，提高代码质量和可维护性

#### 1.2 云开发资源规划
- 云数据库集合设计
- 云存储桶规划
- 云函数架构设计
- 权限与安全策略配置

### 2. 数据库设计

#### 2.1 核心数据集合
| 集合名称 | 主要字段 | 用途说明 |
|---------|--------|---------|
| activities | id, title, description, steps, ageRange, duration, tags, coverImage, difficulty | 存储所有活动卡片信息 |
| collections | id, title, description, type, coverImage, tags, activityIds, educationTheory | 存储系统预设合集 |
| users | openid, nickName, avatarUrl, children[], preferences, favorites | 用户基本信息与偏好设置 |
| records | id, userId, activityId, images, notes, completionTime, duration | 活动完成记录 |
| children | id, userId, name, gender, birthday, avatar, interests | 孩子信息管理 |
| favorites | userId, type(activity/collection), itemId, createTime | 用户收藏内容 |

#### 2.2 索引设计
- 为用户ID、活动ID、合集ID等高频查询字段创建索引
- 为标签、年龄段等筛选条件创建复合索引

### 3. 云函数开发计划

#### 3.1 核心云函数
| 云函数名称 | 功能说明 | 输入参数 | 输出 |
|-----------|---------|---------|------|
| getActivities | 获取活动列表，支持分页和筛选 | page, size, filters | {activities[], total} |
| getCollections | 获取合集列表，支持分页和筛选 | page, size, filters | {collections[], total} |
| getCollectionDetail | 获取合集详情及包含活动 | collectionId | {collection, activities[]} |
| getActivityDetail | 获取活动详情 | activityId | activity |
| saveRecord | 保存活动完成记录 | record | recordId |
| uploadImages | 上传活动图片到云存储 | fileList | urls[] |
| toggleFavorite | 添加/取消收藏 | type, itemId | {isFavorite} |
| getUserProfile | 获取用户信息及统计数据 | - | {userInfo, stats} |
| updateUserPreferences | 更新用户偏好设置 | preferences | success |
| getRecommendations | 获取个性化推荐活动 | - | activities[] |

#### 3.2 AI相关云函数
| 云函数名称 | 功能说明 | 输入参数 | 输出 |
|-----------|---------|---------|------|
| generateActivity | 基于用户需求生成活动建议 | prompt, preferences | activity |
| analyzeActivityImages | 分析活动图片，提取关键信息 | imageUrls | {tags, analysis} |

### 4. 前端开发计划

#### 4.1 页面开发清单
| 页面路径 | 功能说明 | 优先级 | 依赖云函数 |
|---------|---------|-------|----------|
| pages/index/index | 首页，展示推荐合集和活动 | P0 | getCollections, getActivities |
| pages/collections/list | 合集列表页 | P0 | getCollections |
| pages/collections/detail | 合集详情页 | P0 | getCollectionDetail |
| pages/activities/detail | 活动详情页 | P0 | getActivityDetail |
| pages/activities/execute | 活动执行页 | P0 | - |
| pages/activities/record | 活动记录页 | P1 | saveRecord, uploadImages |
| pages/activities/share | 活动分享页 | P1 | - |
| pages/profile/index | 个人中心页 | P0 | getUserProfile |
| pages/profile/children | 孩子管理页 | P1 | - |
| pages/profile/preferences | 偏好设置页 | P1 | updateUserPreferences |
| pages/profile/records | 历史记录页 | P1 | - |
| pages/profile/favorites | 我的收藏页 | P1 | - |

#### 4.2 组件开发计划
- 活动卡片组件（ActivityCard）
- 合集卡片组件（CollectionCard）
- 标签组件（TagGroup）
- 图片上传组件（ImageUploader）
- 活动步骤组件（StepGuide）
- 计时器组件（Timer）
- 筛选器组件（Filter）
- 空状态组件（EmptyState）
- 加载状态组件（Loading）

### 5. 存储与缓存策略

#### 5.1 云存储规划
- 活动封面图：collections/covers/
- 活动步骤图：activities/steps/
- 用户上传图片：users/{openid}/records/
- 头像与缩略图：thumbnails/

#### 5.2 本地缓存策略
- 缓存首页推荐数据，减少请求次数
- 缓存用户基本信息和偏好设置
- 缓存最近浏览的活动和合集
- 缓存活动执行进度，支持断点继续

### 6. 开发阶段规划

#### 6.1 第一阶段（2周）：基础架构与核心功能
- 项目初始化与云开发环境配置
- 数据库集合创建与索引设置
- 核心云函数开发（活动与合集相关）
- 首页、合集列表页、活动详情页开发

#### 6.2 第二阶段（2周）：用户系统与记录功能
- 用户授权与信息管理
- 活动执行与记录功能
- 个人中心页面
- 收藏与历史记录功能

#### 6.3 第三阶段（1周）：AI功能与优化
- AI活动推荐功能
- 活动图片分析功能
- 性能优化与体验提升
- 错误处理与异常情况优化

#### 6.4 第四阶段（1周）：测试与上线准备
- 全面功能测试
- 性能与兼容性测试
- 内容审核与安全检查
- 上线前准备与文档完善

### 7. 技术栈选择

#### 7.1 前端技术
- 框架：原生微信小程序 + TypeScript
- UI组件：自研组件 + WeUI
- 状态管理：全局状态 + 页面状态分离
- 样式：WXSS + Flex布局

#### 7.2 后端技术
- 云函数：Node.js + TypeScript
- 数据库：云开发数据库
- 存储：云开发存储
- AI服务：微信云托管 + 第三方AI服务API

### 8. 安全与性能考量

#### 8.1 安全策略
- 数据库访问权限严格控制
- 敏感操作添加二次验证
- 用户数据脱敏处理
- 定期数据备份

#### 8.2 性能优化
- 图片懒加载与预加载策略
- 分包加载减少首次启动时间
- 合理使用缓存减少请求
- 云函数超时与并发控制 